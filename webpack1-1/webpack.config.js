// pathæ˜¯Node.jsé‡Œçš„è·¯å¾„è§£ææ¨¡å—ï¼Œ
// ä½ å¯ä»¥å°†å…¶çœ‹æˆæ˜¯ä¸€ä¸ªJSæ™®é€šå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚
const path = require('path')

module.exports = {
    // contextï¼šåŸºç¡€ç›®å½•
    // å«ä¹‰ï¼šä»å·¥ç¨‹æ ¹ç›®å½•ä¸‹srcæ–‡ä»¶å¤¹ä¸‹çš„jsæ–‡ä»¶å¤¹é‡Œçš„a.jså¼€å§‹æ‰“åŒ…ï¼ˆç»å¯¹è·¯å¾„ï¼‰
    // ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šå»è®¾ç½®contextï¼Œåœ¨æˆ‘ä»¬æ²¡æœ‰è®¾ç½®contextçš„æ—¶å€™ï¼Œå®ƒæ˜¯å½“å‰å·¥ç¨‹çš„æ ¹ç›®å½•ã€‚
    // context: path.resolve(__dirname, './src'),

    // å…¥å£
    // * å­—ç¬¦ä¸²å½¢å¼ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
    entry: './a.js',
    // * æ•°ç»„å½¢å¼
    // å«ä¹‰ï¼šæ•°ç»„æœ€åä¸€ä¸ªæ–‡ä»¶æ˜¯èµ„æºçš„å…¥å£æ–‡ä»¶ï¼Œæ•°ç»„å…¶ä½™æ–‡ä»¶ä¼šé¢„å…ˆæ„å»ºåˆ°å…¥å£æ–‡ä»¶ã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªå…¥å£
    // entry: ['core-js/stable', 'regenerator-runtime/runtime', './a.js']
    // * å¯¹è±¡å½¢å¼ï¼ˆå¤šå…¥å£é…ç½®ï¼Œæ‰“åŒ…åç”Ÿæˆå¤šä¸ªJSæ–‡ä»¶ï¼‰
    // entry: {
    //  app1: './a.js',
    //  app2: './b.js',
    // },
    // * å‡½æ•°å½¢å¼(è·å–å‡½æ•°è¿”å›å€¼)
    // entry: () => './a.js'

    // è¾“å…¥
    output: {
        // æ‰“åŒ…åç”Ÿæˆçš„èµ„æºåç§°
        // * å­—ç¬¦ä¸²å½¢å¼
        filename: 'bundle.js',
        // * è¿˜å¯ä¸ºç›¸å¯¹åœ°å€ filename: './js/bundle.js'
        // * æ”¯æŒç±»ä¼¼å˜é‡çš„æ–¹å¼ç”ŸæˆåŠ¨æ€æ–‡ä»¶å,ä¾‹å¦‚:
        // [hash].js
        // filename: '[hash].js'
        // [name].js([name]è¡¨ç¤ºçš„æ˜¯chunkçš„åç§°)
        // å­—ç¬¦ä¸²å’Œæ•°ç»„å½¢å¼çš„entryï¼Œ[name]å€¼éƒ½æ˜¯mainã€‚
        // å¯¹äºentryæ˜¯å¯¹è±¡å½¢å¼çš„å¤šå…¥å£é…ç½®ï¼Œ[name]æ˜¯å¯¹è±¡çš„å±æ€§åï¼Œå¯¹åº”æ¯ä¸€ä¸ªå…¥å£æ–‡ä»¶ã€‚
        // filename: '[name].js'
        // [chunkhash].jsã€[contenthash].js

        // è¡¨ç¤ºæ‰“åŒ…åç”Ÿæˆçš„æ–‡ä»¶å
        // (ä¸filenameçš„åŒºåˆ«)æ‰“åŒ…è¿‡ç¨‹ä¸­éå…¥å£æ–‡ä»¶çš„chunkåç§°ï¼Œé€šå¸¸åœ¨ä½¿ç”¨å¼‚æ­¥æ¨¡å—çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆéå…¥å£æ–‡ä»¶çš„chunkã€‚
        // chunkFilename: "",

        // path è¡¨ç¤ºèµ„æºæ‰“åŒ…åè¾“å‡ºçš„ä½ç½®ï¼Œè¯¥ä½ç½®åœ°å€è¦æ˜¯ç»å¯¹è·¯å¾„ã€‚å¦‚æœä½ ä¸è®¾ç½®å®ƒï¼Œwebpack4é»˜è®¤ä¸ºdistç›®å½•ã€‚
        // pathè¾“å‡ºè·¯å¾„è¡¨ç¤ºçš„æ˜¯åœ¨ç£ç›˜ä¸Šæ„å»ºç”Ÿæˆçš„çœŸå®æ–‡ä»¶å­˜æ”¾åœ°å€ã€‚
        // __dirnameæ˜¯Node.jsçš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè¡¨ç¤ºå½“å‰æ–‡ä»¶çš„è·¯å¾„
        path: path.resolve(__dirname, ''),

        // èµ„æºè®¿é—®è·¯å¾„
        // æ–‡ä»¶æ‰“åŒ…åå­˜å‚¨pathä»£è¡¨å­˜æ”¾äºç£ç›˜ä¸­çš„ä½ç½®ï¼Œæµè§ˆå™¨éœ€è¦é€šè¿‡ publicPathæ¥æŒ‡å®šèµ„æºå­˜æ”¾çš„ç£ç›˜è·¯å¾„ è¿›è¡Œè®¿é—®
        // publicPath: "",  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://www.apple.com/ipad/bundle.js
        // * ç›¸å¯¹è·¯å¾„
        // ä»¥â€œ./â€æˆ–â€œ../â€ç­‰å¼€å¤´ï¼Œè¡¨ç¤ºè¦è®¿é—®çš„èµ„æºä»¥å½“å‰é¡µé¢urlä½œä¸ºåŸºç¡€è·¯å¾„
        // publicPath: "../dist/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://www.apple.com/dist/bundle.js
        // publicPath: "./dist/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://www.apple.com/ipad/dist/bundle.js
        // ä»¥â€œ/â€å¼€å¤´ï¼Œè¡¨ç¤ºè¦è®¿é—®çš„èµ„æºä»¥å½“å‰é¡µé¢çš„æœåŠ¡å™¨åœ°å€ä½œä¸ºåŸºç¡€è·¯å¾„
        // publicPath: "/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://www.apple.com/bundle.jsã€‚
        // publicPath: "/dist/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://www.apple.com/dist/bundle.jsã€‚
        // * ç»å¯¹è·¯å¾„ï¼ˆä»¥HTTPåè®®åç§°å¼€å§‹ï¼‰
        // ä¸€èˆ¬åœ¨ä½¿ç”¨CDNçš„æ—¶å€™ï¼Œå› ä¸ºCDNçš„åŸŸåä¸æˆ‘ä»¬è‡ªå·±æœåŠ¡å™¨çš„åŸŸåä¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚
        // publicPath: "https://cdn.apple.net/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://cdn.apple.net/bundle.js
        // publicPath: "http://cdn.apple.net/"  // èµ„æºçš„è®¿é—®åœ°å€æ˜¯http://cdn.apple.net/bundle.js
        // publicPath: "//cdn.apple.net/dist/"  // ï¼ˆç›¸å¯¹åè®®ï¼šæµè§ˆå™¨ä¼šå¯¹å‰é¡µé¢ä½¿ç”¨çš„åè®®åç§°ä¸ç›¸å¯¹åè®®æ‹¼æ¥ ï¼‰èµ„æºçš„è®¿é—®åœ°å€æ˜¯https://cdn.apple.net/dist/bundle.js
    },

    module: {
        // å¤„ç†è§„åˆ™
        rules: [{
            // åŒ¹é…ä»¥cssç»“å°¾çš„æ–‡ä»¶
            test: /\.css$/,
            // loaderå°±æ˜¯å¸®åŠ©Webpackæ¥å¤„ç†å„ç§ç±»å‹æ–‡ä»¶çš„ï¼Œæ‰§è¡Œé¡ºè®¯æ˜¯ä»åå‘å‰æ‰§è¡Œ
            // css-loader: è§£æcssæ–‡ä»¶ï¼ˆåŒ…å«importç­‰ï¼‰ï¼ŒæŠŠè§£æåçš„æ–‡ä»¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ‰“åŒ…åˆ°Jsæ–‡ä»¶ä¸­ã€‚ä½†æ­¤æ—¶cssæ ·å¼å¹¶ä¸ä¼šç”Ÿæ•ˆã€‚
            // style-loader: å°†jsé‡Œçš„æ ·å¼ä»£ç æ’å…¥åˆ°htmlæ–‡ä»¶é‡Œï¼ˆåŸç†ï¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆçš„styleæ ‡ç­¾æ’å…¥åˆ°HTMLçš„headæ ‡ç­¾é‡Œï¼‰ã€‚
            use: ['style-loader', 'css-loader']
        }]
    },

    // modeæ˜¯Webpackçš„æ‰“åŒ…æ¨¡å¼ï¼Œé»˜è®¤æ˜¯'production'ï¼Œè¡¨ç¤ºç»™ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„.
    // ç”Ÿäº§å‹ç¼©ï¼›â€˜none'ä¸ä¼šå‹ç¼©bundle.jsé‡Œçš„ä»£ç 
    mode: 'none'
}


// ps
// ä»¥ä¸Šä¸ºé…ç½®æ–‡ä»¶æ‰“åŒ…ğŸ‘†
// è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œæ‰“åŒ…ğŸ‘‡ï¼š
// npx webpack a.js -o bundle.js